machine:
  xcode:
    version: "7.0"
test:
  override:
      - set -o pipefail &&
        xcodebuild
          CODE_SIGNING_REQUIRED=NO
          CODE_SIGN_IDENTITY=
          PROVISIONING_PROFILE=
          -sdk iphonesimulator
          -destination 'platform=iOS Simulator,name=iPhone 6,OS=latest'
          -workspace Swish.xcworkspace
          -scheme "Swish"
          clean build test |
        tee $CIRCLE_ARTIFACTS/xcode_raw.log |
        xcpretty --color --report junit --output $CIRCLE_TEST_REPORTS/xcode/results.xml

    # Configuration for xctool
    #
    # - xctool
    #   -reporter pretty
    #   -reporter junit:$CIRCLE_TEST_REPORTS/xcode/results.xml
    #   -reporter plain:$CIRCLE_ARTIFACTS/xctool.log
    #   CODE_SIGNING_REQUIRED=NO
    #   CODE_SIGN_IDENTITY=
    #   PROVISIONING_PROFILE=
    #   -destination 'platform=iOS Simulator,name=iPhone 6,OS=latest'
    #   -sdk iphonesimulator
    #   -workspace Swish.xcworkspace
    #   -scheme "Swish"
    #   build build-tests run-tests
